#!/bin/bash

## Frontend
alias npm-publish-frontend='yarn --cwd angular/ && yarn --cwd angular/ run publish'
alias package-frontend='package frontend.tar.gz -C angular/dist ./'
alias copy-frontend-package-to-server='copy frontend.tar.gz "$server":~/'
alias unpackage-frontend-package-from-server='attach -t "$unpackage  ~/frontend.tar.gz -C /var/www/frontend.$DOMAIN"'

build_frontend () {
    npm-publish-frontend && \
    package-frontend && \
    copy-frontend-package-to-server && \
    unpackage-frontend-package-from-server && \
    change-permission
}

init_deploy_frontend () {
    build_frontend
    restart-nginx
}

deploy_frontend () {
    build_frontend && \
    restart-nginx
}
